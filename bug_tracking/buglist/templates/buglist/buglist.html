{% extends 'home/base.html' %} {%load static%} {% load humanize %} {% block content %}

<link rel="stylesheet" href='{%static "css/buglist.css"%}'>
<section class="home">
  <div class="titulo">
    <div class="text">Lista de bugs</div>
  </div>

  <div class="container-table">
    <div class="table-data">
      <div class="order">
        <div class="head">
          <h3>Errores</h3>
          
          <a href="www.google.cl"><i class='bx bx-search'></i></a>
          <i class='bx bx-filter'></i>
        </div>
        <table>
          <thead>
            <tr>
              <th>ID</th>
              <th>Título</th>
              <th>Fecha</th>
              <th>Estado</th>
              <th>Proyecto</th>
            </tr>
          </thead>
          <tbody>
            {% if bug_list %}
            {% for Bug in bug_list %}
            <tr onclick="window.location.href = '{% url 'detail:index' Bug.id_bug %}';">
              <td>
                {{ Bug.id_bug }}
                <img src={%static "images/logo.png"%}>
              </td>
              <td>
                <p>{{ Bug.titulo | truncatechars:90 }}</p>
              </td>
              <td>{{ Bug.fecha_reporte | naturaltime}}</td>
              {%if Bug.estado == "('ASIGNADO', 'bug recien asignado')"%}
                <td><span class="status process">Asignado</span></td>
              {%endif%}
              {%if Bug.estado == "('SOLUCIONADO', 'bug solucionado')"%}
                <td><span class="status completed">Solucionado</span></td>
              {%endif%}
              {%if Bug.estado == "('EN PROCESO', 'bug esta proceso de revisión')"%}
                <td><span class="status pending">En proceso</span></td>
              {%endif%}
              <td>{{ Bug.id_proyecto }}</td>
            </tr>
              {%endfor%}
            {%else%}
            <tr>
              <td>No hay errores disponibles</p>
            </tr>
            {%endif%}
            
            
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <div class="titulo">
    <div class="text">Lista de reportes</div>
  </div>

  <div class="container-table">
    <div class="table-data" style="margin-bottom: 2em;">
      <div class="order">
        <div class="head">
          <h3>Reportes</h3>
          
          <a href="www.google.cl"><i class='bx bx-search'></i></a>
          <i class='bx bx-filter'></i>
        </div>
        <table>
          <thead>
            <tr>
              <th>ID</th>
              <th>Título</th>
              <th>Fecha</th>
              <th>Proyecto</th>
            </tr>
          </thead>
          <tbody>
            {% if report_list %}
            <tr>
              {% for ReporteBug in report_list %}
              <td>
                <p>{{ ReporteBug.id_reporte }}</p>
                <img src={%static "images/logo.png"%}>
              </td>
              <td>{{ ReporteBug.titulo | truncatechars:90 }}</td>
              <td>{{ ReporteBug.fecha_reporte | naturaltime }}</td>
              <td>{{ ReporteBug.id_proyecto.nombre_proyecto }}</td>
            </tr>
              {%endfor%}
            {%else%}
            <tr>
              <td>No hay errores disponibles</p>
            </tr>
            {%endif%}
            
          </tbody>
        </table>
      </div>
    </div>
  </div>



</section>
{% endblock %}